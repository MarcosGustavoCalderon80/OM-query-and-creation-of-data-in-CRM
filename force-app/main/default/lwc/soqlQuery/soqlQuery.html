<template>
    <lightning-card icon-name="standard:account" variant="base">
        <div>
            <p class="Consulta-SOQL">Consulta SOQL</p>
        </div>
        <template if:true={fieldSuggestions.length}>
            <div class="suggestions-line">
                <template for:each={fieldSuggestions} for:item="field">
                    <span key={field} data-field={field} class="suggestion-item" onclick={handleFieldClick}>{field}</span>
                </template>
            </div>
        </template>
        <lightning-textarea class="soql-textarea"
            value={soqlQuery} 
            onchange={handleQueryChange} 
            onkeydown={handleKeyDown}
            onclick={handleQueryChange}
            placeholder="Escribe tu consulta SOQL" 
            type="text">
        </lightning-textarea>
        <div class="button-ejecutar">
            <lightning-button label="Ejecutar Consulta" onclick={handleExecuteQuery}></lightning-button>
            <div>Records: {recordsLength}</div>
        </div>
    </lightning-card>
    <template if:true={hasRecords}>
        <lightning-datatable data={records} columns={columns} key-field="Id"></lightning-datatable>
    </template>
    <template if:false={hasRecords}>
        <p>No hay resultados para mostrar.</p>
    </template>
    <template if:true={error}>
        <div class="slds-text-color_error">{error}</div>
    </template>
</template>